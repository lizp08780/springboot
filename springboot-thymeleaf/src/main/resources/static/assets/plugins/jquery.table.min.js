(function(f){var b=function(h,g){this.$element=f(h);this.$body=this.$element.find("tbody");this.$pagination=this.$element.find(".pagination");this.$pageSize=this.$element.find(".page-size");this.$totalCount=this.$element.find(".total-count");this.options=g};b.DEFAULTS={inModel:[],outModel:[]};function c(g){return g.closest("table")}b.prototype.paginate=function(i,h,g){var l=Math.ceil(i/g)||1,k=h<3?3:(h>l-2?l-2:h),j={prev:h-1,first:1,pageNav1:k-2,pageNav2:k-1,pageNav3:k,pageNav4:k+1,pageNav5:k+2,last:l,next:h+1};this.$pagination.empty();if(this.$pageSize.is("select")){this.$pageSize.val(g)}else{this.$pageSize.html(g)}this.$totalCount.html(i);if(h!=1){this.$pagination.append('<li data-target="'+this.$element.attr("id")+'" data-page-no="'+j.first+'" title="最前页"><a href="#">&laquo;</a></li>');this.$pagination.append('<li data-target="'+this.$element.attr("id")+'" data-page-no="'+j.prev+'" title="上一页"><a href="#">&lsaquo;</a></li>')}if(j.pageNav1>=1&&j.pageNav1<=l){this.$pagination.append('<li data-target="'+this.$element.attr("id")+'" class="'+(j.pageNav1==h?"active":"")+'" data-page-no="'+j.pageNav1+'"><a href="#">'+j.pageNav1+"</a></li>")}if(j.pageNav2>=1&&j.pageNav2<=l){this.$pagination.append('<li data-target="'+this.$element.attr("id")+'" class="'+(j.pageNav2==h?"active":"")+'" data-page-no="'+j.pageNav2+'"><a href="#">'+j.pageNav2+"</a></li>")}if(j.pageNav3>=1&&j.pageNav3<=l){this.$pagination.append('<li data-target="'+this.$element.attr("id")+'" class="'+(j.pageNav3==h?"active":"")+'" data-page-no="'+j.pageNav3+'"><a href="#">'+j.pageNav3+"</a></li>")}if(j.pageNav4>=1&&j.pageNav4<=l){this.$pagination.append('<li data-target="'+this.$element.attr("id")+'" class="'+(j.pageNav4==h?"active":"")+'" data-page-no="'+j.pageNav4+'"><a href="#">'+j.pageNav4+"</a></li>")}if(j.pageNav5>=1&&j.pageNav5<=l){this.$pagination.append('<li data-target="'+this.$element.attr("id")+'" class="'+(j.pageNav5==h?"active":"")+'" data-page-no="'+j.pageNav5+'"><a href="#">'+j.pageNav5+"</a></li>")}if(h!=l){this.$pagination.append('<li data-target="'+this.$element.attr("id")+'" data-page-no="'+j.next+'" title="下一页"><a href="#">&rsaquo;</a></li>');this.$pagination.append('<li data-target="'+this.$element.attr("id")+'" data-page-no="'+j.last+'" title="最后页"><a href="#">&raquo;</a></li>')}};b.prototype.data=function(h,g){if(h){this._setData(h,g)}else{return this._getData()}};b.prototype.page=function(g){if(g){this._setPage(g)}else{return{totalCount:this.totalCount(),pageSize:this.pageSize(),pageNo:this.pageNo(),rows:this._getData()}}};b.prototype.pageNo=function(){return parseInt(f("li.active",this.$pagination).data("page-no"))||1};b.prototype.pageSize=function(){return parseInt(this.$pageSize.is("select")?this.$pageSize.val():this.$pageSize.text())||this.$body.find("tr").length};b.prototype.totalCount=function(){return parseInt(this.$totalCount.text())||this.$body.find("tr").length};b.prototype.reload=function(){this.turnPage(f("li.active",this.$pagination))};b.prototype._setPage=function(g){this._setData(g.rows);this.paginate(g.totalCount,g.pageNo,g.pageSize)};b.prototype._setData=function(j,g){if(g===undefined||g===null||g<0){this.$body.empty();g=-1}if(j&&j.length){for(var h=0;h<j.length;h++){this._insertRow(g+h,j[h])}}};b.prototype._insertRow=function(m,r){var o=f("<tr>").data("data",r),k=this.$body.children("tr");for(var l=0;l<this.options.inModel.length;l++){var h=f("<td>"),n=this.options.inModel[l],q=n.formatter,p=n.align||"left",g=n.width||"";if(f.isFunction(q)){h.append(q(r))}else{h.append("&nbsp;")}h.css({"text-align":p,width:g});o.append(h)}if(m<0){this.$body.prepend(o)}else{if(m>k.length){this.$body.append(o)}else{k.eq(m).after(o)}}};b.prototype._getData=function(){var n=this.$body.find("tr"),q=[];for(var l=0;l<n.length;l++){var p={};for(var k=0;k<this.options.outModel.length;k++){var m=this.options.outModel[k],h=m.extractor,g=m.name,o=null;if(f.isFunction(h)){o=h(n.eq(l).find("td"))}if(g){p[g]=o}else{if(f.isArray(p)){p.push(o)}else{p=[o]}}}q.push(p)}return q};b.prototype.turnPage=function(j){var i=c(f(j)),h=parseInt(f(j).data("page-no")),g={relatedTarget:j};i.trigger(f.Event("turn.bs.table",g),[h,this.pageSize()])};b.prototype.changeSize=function(j){var i=c(f(j)),h=f(j).val(),g={relatedTarget:j};i.trigger(f.Event("size.bs.table",g),[this.pageNo(),h])};function d(i){var g=Array.prototype.slice.call(arguments,1),h=this;this.each(function(){var m=f(this);var l=m.data("bs.table");var j=f.extend({},b.DEFAULTS,m.data(),typeof i=="object"&&i);if(!l){m.data("bs.table",(l=new b(this,j)))}if(typeof i=="string"){if(!l){return f.error("cannot call methods on "+table+" prior to initialization; attempted to call method '"+i+"'")}if(!f.isFunction(l[i])||i.charAt(0)==="_"){return f.error("no such method '"+i+"' for "+table+" widget instance")}var k=l[i].apply(l,g);if(k!==l&&k!==undefined){h=k&&k.jquery?h.pushStack(k.get()):k;return false}}});return h}var a=f.fn.table;f.fn.table=d;f.fn.table.Constructor=b;f.fn.table.noConflict=function(){f.fn.table=a;return this};var e=function(j){var i=f(this),h=i.attr("href"),g=i.closest("table");j.preventDefault();d.call(g,j.data,this)};f(document).on("click.bs.table.data-api",".pagination li","turnPage",e).on("change.bs.table.data-api",".page-size","changeSize",e)})(jQuery);