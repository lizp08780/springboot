(function(e){var c=0,b=/msie/.test(navigator.userAgent.toLowerCase()),d=function(){var f="__service_iframe__",g=c++;return e("<iframe id='"+f+g+"' name='"+f+g+"' width='0' height='0' style='display:none'></iframe>").appendTo("body")};var a=function(f,i){var h=e.extend({},e.ServiceClient.defaults,i);var k=f.indexOf("?");if(k<0){k=f.indexOf("#")}if(k<0){k=f.length}var l=f.lastIndexOf(".",k),g=(f.substring(l+1,k)||"").toLowerCase();if(g=="json"){h.contentType="application/json;charset=utf-8"}else{if(g=="xml"){h.contentType="application/xml;charset=utf-8"}else{if(g=="html"){h.contentType="text/html;charset=utf-8"}else{if(g=="txt"){h.contentType="text/plain;charset=utf-8"}}}}h.dataType=h.dataType||g;if(h.processData===undefined){h.processData=true}var j=(h.contentType||"").toLowerCase();if(h.processData&&typeof h.data!=="string"){if(j.indexOf("json")){h.data=JSON.stringify(h.data)}else{if(j.indexOf("xml")){}}}this.options=h;this.callback=function(n,m){if(e.isFunction(h.complete)){try{h.complete(n)}catch(o){e.error(o)}}if(n&&!n.success){if(e.isFunction(h.error)){try{h.error(n)}catch(o){e.error(o)}}}else{if(e.isFunction(h.success)){try{h.success(n)}catch(o){e.error(o)}}}try{if(n&&!n.success){m.reject(n)}else{m.resolve(n)}}catch(o){e.error(o)}}};e.ServiceClient={};e.ServiceClient.defaults={timeout:300000,processData:true,type:"POST",ignore401:true};e.ServiceClient.invoke=function(g,h){var k=new a(g,h),i=e.Deferred(),f=e.extend({},e.ServiceClient.defaults,k.options,{complete:false,success:function(m,n,l){k.callback(m,i)},error:function(l,n,m){if(f.ignore401&&l.status==401){return}k.callback({success:false,errcode:"http-"+l.status,errmsg:m?m.toString():(n=="timeout"?"请求超时":"请求失败")},i)}});try{e.ajax(g,f)}catch(j){k.callback({success:false,code:"ajax-"+(j.number&65535),message:j.description},i)}return i.promise()}})(jQuery);